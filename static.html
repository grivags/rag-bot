<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>RAG Bot</title>
    <style>
        body { font-family: system-ui, Arial, sans-serif; max-width: 800px; margin: 40px auto; }
        textarea { width: 100%; height: 90px; }
        .ans { white-space: pre-wrap; background:#f6f6f6; padding:12px; border-radius:8px; }
        .src { font-size: 12px; color:#555; margin-top:8px; }
    </style>
</head>
<body>
    <h2>RAG Bot</h2>
    <textarea id="q" placeholder="Tulis pertanyaan…"></textarea><br/>
    <button id="askBtn">Tanya</button>
    <div id="out"></div>

<script>
    async function ask() {
        const q = document.getElementById('q').value.trim();
        if (!q) return;

        const out = document.getElementById('out');
        out.innerHTML = "Loading…";

        const r = await fetch('http://localhost:8000/ask', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({question:q})
        });
        const data = await r.json();
        
        out.innerHTML = `<div class="ans">${data.answer}</div>` +
        `<div class="src"><b>Sumber:</b><br/>` +
        data.sources.map(s => `• ${s.source} — ${s.preview}`).join("<br/>") +
        `</div>`;
    }
    document.getElementById('askBtn').onclick = ask;
</script>
</body>
</html>
